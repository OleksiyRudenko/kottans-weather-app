{"version":3,"sources":["src\\utils\\index.js","src\\framework\\ComponentFactory.js","src\\framework\\Component.js","src\\framework\\index.js","src\\Temperature\\Temperature.js","src\\Temperature\\index.js","src\\Counter\\Counter.js","src\\Counter\\index.js","src\\App\\App.js","src\\App\\index.js","src\\index.js"],"names":["createDomFragment","template","document","createElement","innerHTML","string","trim","content","clearDomChildren","domElement","appendDomFragment","domFragment","Array","isArray","append","buildDomFragment","host","elements","forEach","element","elementSpec","tag","classList","split","add","props","children","appendChild","bindScope","scope","names","name","bind","Error","ComponentFactory","mappings","register","componentClass","get","componentClassName","Component","state","_render","partialState","Object","assign","rendered","render","_createDomFragment","createDocumentFragment","componentCount","idBase","Date","getTime","componentMap","replace","match","p1","p2","offset","id","parsingResults","length","paramsRegex","exec","objectPropertyName","propValue","filter","segment","join","eventTypes","elementsWithListeners","querySelectorAll","map","eventType","hasAttribute","handlerName","getAttribute","addEventListener","keys","querySelector","cls","default","Temperature","t","unit","Counter","updateState","count","changeHandler","App","newValue","getElementById"],"mappings":"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","file":"src.2e38d8bb.map","sourcesContent":["\r\nexport const createDomFragment = string => {\r\n  const template = document.createElement('template');\r\n  template.innerHTML = string.trim();\r\n  return template.content;\r\n};\r\n\r\nexport const clearDomChildren = domElement => {\r\n  domElement.innerHTML = '';\r\n  return domElement;\r\n};\r\n\r\nexport const appendDomFragment = (domElement, domFragment) => {\r\n  if (Array.isArray(domFragment)) {\r\n    domElement.append(...domFragment);\r\n  } else {\r\n    domElement.append(domFragment);\r\n  }\r\n  return domElement;\r\n};\r\n\r\nexport const buildDomFragment = (host, elements) => {\r\n  elements.forEach(elementSpec => {\r\n    let element = document.createElement(typeof elementSpec.tag === 'string' ? elementSpec.tag : 'div');\r\n    if (elementSpec.innerHTML) {\r\n      element.innerHTML = elementSpec.innerHTML;\r\n    }\r\n    if (elementSpec.classList) {\r\n      if (typeof elementSpec.classList === 'string') {\r\n        elementSpec.classList = elementSpec.classList.split(' ');\r\n      }\r\n      element.classList.add(...elementSpec.classList);\r\n    }\r\n    if (!(typeof elementSpec.tag === 'string')) {\r\n      new elementSpec.tag(element, elementSpec.props);\r\n    }\r\n    if (elementSpec.children) {\r\n      buildDomFragment(element, elementSpec.children);\r\n    }\r\n    host.appendChild(element);\r\n  });\r\n  return host;\r\n};\r\n\r\nexport const bindScope = (scope, ...names) => {\r\n  names.forEach(name => {\r\n    if (typeof scope[name] === 'function') {\r\n      scope[name] = scope[name].bind(scope);\r\n    } else {\r\n      throw Error(\r\n        `Expected ${name} to be a function. Instead ${name} is ${typeof scope[name]}`\r\n      );\r\n    }\r\n  });\r\n};\r\n","const ComponentFactory = {\r\n  mappings: {},\r\n  register: componentClass => ComponentFactory.mappings[componentClass.name] = componentClass,\r\n  get: componentClassName => ComponentFactory.mappings[componentClassName],\r\n};\r\nexport default ComponentFactory;\r\n","import { clearDomChildren, appendDomFragment, buildDomFragment } from \"../utils\";\r\nimport ComponentFactory from \"./ComponentFactory\";\r\n\r\nexport default class Component {\r\n  constructor(host, props) {\r\n    this.host = host;\r\n    this.props = props || {};\r\n    this.state = {};\r\n    this._render();\r\n  }\r\n\r\n  render() {\r\n    return '';\r\n  }\r\n\r\n  updateState(partialState) {\r\n    this.state = Object.assign({}, this.state, partialState);\r\n    this._render();\r\n  }\r\n\r\n  _render() {\r\n    let rendered = this.render();\r\n    if (typeof rendered === 'string') {\r\n      rendered = this._createDomFragment(rendered);\r\n    }\r\n    if (Array.isArray(rendered) && rendered[0].tag) {\r\n      rendered = buildDomFragment(document.createDocumentFragment(), rendered);\r\n    }\r\n    appendDomFragment(clearDomChildren(this.host), rendered);\r\n  }\r\n\r\n  _createDomFragment(string) {\r\n    const template = document.createElement('template');\r\n\r\n    let componentCount = 0;\r\n    let idBase = new Date().getTime();\r\n    let componentMap = {};\r\n\r\n    string = string.trim().replace(/<([A-Z][a-zA-Z]*)(.*)\\/>/g, (match, p1, p2, offset) => {\r\n      const id = 'z' + idBase + (componentCount++);\r\n\r\n      // extract props\r\n      let props = {};\r\n      let parsingResults;\r\n      p2 = p2.trim();\r\n      if (p2.length) {\r\n        const paramsRegex = /(\\S+)=['\"]?((?:(?!\\/>|>|\"|'|\\s).)+)/g;\r\n        while ((parsingResults = paramsRegex.exec(p2)) !== null) {\r\n          let objectPropertyName = parsingResults[2].match(/{(.*)}/);\r\n          const propValue = objectPropertyName\r\n            ? this[objectPropertyName[1].split('.').filter(segment => segment !== 'this').join('.')]\r\n            : parsingResults[2];\r\n          props[parsingResults[1]] = propValue;\r\n        }\r\n      }\r\n\r\n      componentMap[id] = {\r\n        name: p1,\r\n        props: props,\r\n      };\r\n      return `<div id=\"${id}\"></div>`;\r\n    });\r\n    template.innerHTML = string;\r\n\r\n    // manage event handlers\r\n    const eventTypes = ['click', 'mouseup', 'mousedown', 'mouseover', 'mousein', 'mouseout',\r\n      'change', 'input', 'keyup', 'keydown',\r\n      'focus', 'blur'\r\n    ];\r\n    const elementsWithListeners = template.content.querySelectorAll([eventTypes].map(eventType => 'on-' + eventType));\r\n    elementsWithListeners.forEach(element => {\r\n      eventTypes.forEach(eventType => {\r\n        if (element.hasAttribute('on-' + eventType)) {\r\n          let handlerName = element.getAttribute('on-' + eventType).match(/{(.*)}/)[1];\r\n          handlerName = handlerName.split('.').filter(segment => segment !== 'this').join('.');\r\n          element.addEventListener(eventType, this[handlerName].bind(this));\r\n        }\r\n      });\r\n    });\r\n\r\n    // render mapped components\r\n    Object.keys(componentMap).forEach(id => {\r\n      let host = template.content.querySelector('#' + id);\r\n      const cls = ComponentFactory.get(componentMap[id].name);\r\n      new cls(host, componentMap[id].props);\r\n    });\r\n\r\n    return template.content;\r\n  }\r\n}\r\n","export { default as Component } from './Component';\r\n","import { Component } from \"../framework\";\r\nimport ComponentFactory from \"../framework/ComponentFactory\";\r\n\r\nexport default class Temperature extends Component {\r\n  constructor(host, props) {\r\n    super(host, props);\r\n  }\r\n\r\n  render() {\r\n    return this.props.t + '&deg;' + this.props.unit;\r\n  }\r\n}\r\nComponentFactory.register(Temperature);\r\n","export { default as Temperature } from './Temperature';\r\n","import { Component } from \"../framework\";\r\nimport ComponentFactory from \"../framework/ComponentFactory\";\r\nimport {bindScope} from \"../utils\";\r\n\r\nexport default class Counter extends Component {\r\n  constructor(host, props) {\r\n    super(host, props);\r\n    this.updateState({\r\n      count: this.props.count,\r\n    });\r\n    bindScope(this, 'decrement', 'increment');\r\n  }\r\n\r\n  render() {\r\n    return `<input type=\"button\" value=\"-\" on-Click={this.decrement} />\r\n        ${this.state.count}\r\n        <input type=\"button\" value=\"+\" on-Click={this.increment} />`;\r\n  }\r\n\r\n  decrement() {\r\n    this.props.changeHandler(+this.state.count - 1);\r\n  }\r\n\r\n  increment() {\r\n    this.props.changeHandler(+this.state.count + 1);\r\n  }\r\n}\r\nComponentFactory.register(Counter);\r\n","export { default as Counter } from './Counter';\r\n","import { Component } from \"../framework\";\r\nimport ComponentFactory from \"../framework/ComponentFactory\";\r\nimport { Temperature } from \"../Temperature\";\r\nimport { Counter } from \"../Counter\";\r\nimport { bindScope } from \"../utils\";\r\n\r\nexport default class App extends Component {\r\n  constructor(host) {\r\n    super(host);\r\n    bindScope(this, 'updateCount');\r\n    this.updateState({\r\n      count: 5,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return `<div class=\"flex-column\">\r\n              <div>\r\n                Weather ${this.state.count}\r\n                <Counter count=${this.state.count} changeHandler={this.updateCount} />\r\n              </div>\r\n              <Temperature t=-10 unit=\"C\" />\r\n              <div class=\"flex-row\">\r\n                  <Temperature t=-9 unit=\"C\"/>\r\n                  <Temperature t=-8 unit=\"C\" />\r\n                  <Temperature t=-8 unit=\"C\" />\r\n                  <Temperature t=-5 unit=\"C\" />\r\n                  <Temperature t=-32 unit=\"C\" />\r\n              </div>\r\n           </div>`;\r\n  }\r\n\r\n  updateCount(newValue) {\r\n    this.updateState({\r\n      count: newValue,\r\n    });\r\n  }\r\n}\r\nComponentFactory.register(App);\r\n","export { default as App } from './App';\r\n","import { App } from './App';\r\n\r\nnew App(document.getElementById('root'));\r\n"]}